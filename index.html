<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Favorite Person üíñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- CSS STYLES --- */
        :root {
            --primary-color: #ff9a9e;
            --bg-color: #fecfef;
            --card-bg: #ffffff;
            --text-color: #555;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1, h2 { color: var(--primary-color); text-align: center; }
        
        .container {
            max-width: 600px;
            width: 100%;
            margin-bottom: 50px;
        }

        section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        section:hover { transform: translateY(-3px); }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            font-family: inherit;
            transition: background 0.3s;
        }
        button:hover { background-color: #ff758c; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }

        ul { list-style-type: none; padding: 0; }
        li {
            background: #f9f9f9;
            margin: 5px 0;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .completed { text-decoration: line-through; color: #888; }
        input[type="text"] {
            width: 70%;
            padding: 10px;
            border: 2px solid #eee;
            border-radius: 10px;
            outline: none;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }
        .photo-grid img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
        }

        .prayer-box {
            font-style: italic;
            text-align: center;
            line-height: 1.6;
            color: #777;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>For You üß∏</h1>

        <section id="todo-section">
            <h2>üìù Daily Goals</h2>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="text" id="taskInput" placeholder="What's the plan today?">
                <button onclick="addTask()">Add</button>
            </div>
            <ul id="taskList"></ul>
        </section>

        <section id="rewards-section">
            <h2>üéüÔ∏è Request Station</h2>
            <p style="text-align: center; font-size: 0.9em; color: #888;">Resets every Monday!</p>
            
            <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                <div style="text-align: center;">
                    <button id="bobaBtn" onclick="requestItem('boba', 2)">üßã Boba Request</button>
                    <p id="bobaStatus">Uses left: 2</p>
                </div>
                <div style="text-align: center;">
                    <button id="favorBtn" onclick="requestItem('favor', 1)">‚ú® Girlfriend Favor</button>
                    <p id="favorStatus">Uses left: 1</p>
                </div>
            </div>
        </section>

        <section>
            <h2>üì∏ Us</h2>
            <div class="photo-grid">
                <img src="https://via.placeholder.com/150/ff9a9e/ffffff?text=Photo+1" alt="Us 1">
                <img src="https://via.placeholder.com/150/fecfef/ffffff?text=Photo+2" alt="Us 2">
                <img src="https://via.placeholder.com/150/a18cd1/ffffff?text=Photo+3" alt="Us 3">
            </div>
        </section>

        <section>
            <h2>üåô Good Night</h2>
            <div class="prayer-box">
                <p>"Dear God, thank you for this day. Watch over my love as she sleeps, give her peace and sweet dreams. Let her wake up refreshed and knowing she is loved beyond measure. Amen."</p>
            </div>
        </section>
    </div>

    <script>
        /* --- JAVASCRIPT LOGIC --- */

        // 1. TODO LIST LOGIC
        function loadTasks() {
            const saved = localStorage.getItem('myTasks');
            if (saved) {
                document.getElementById('taskList').innerHTML = saved;
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.onclick = function() { this.parentElement.remove(); saveTasks(); };
                });
                document.querySelectorAll('li span').forEach(span => {
                    span.onclick = function() { this.classList.toggle('completed'); saveTasks(); };
                });
            }
        }

        function addTask() {
            const input = document.getElementById('taskInput');
            const text = input.value;
            if (text === '') return;

            const ul = document.getElementById('taskList');
            const li = document.createElement('li');
            
            li.innerHTML = `
                <span onclick="this.classList.toggle('completed'); saveTasks()">${text}</span>
                <button class="delete-btn" style="background:#ff6b6b; padding: 5px 10px; font-size:0.8em;" onclick="this.parentElement.remove(); saveTasks()">‚úï</button>
            `;
            
            ul.appendChild(li);
            input.value = '';
            saveTasks();
        }

        function saveTasks() {
            localStorage.setItem('myTasks', document.getElementById('taskList').innerHTML);
        }

        // 2. REQUEST SYSTEM LOGIC (Integrated Webhooks)
        
        // Storing your webhooks securely in a constant
        const WEBHOOKS = {
            'boba': "https://discord.com/api/webhooks/1470528275976552499/PRO0V9h4N06YQ4iM13BjbctJJX5i6W1Yc3vt9hrPh3DubVsPzhgbB0PW_N9t_QEEHhKx",
            'favor': "https://discord.com/api/webhooks/1470528292246523981/TR6XWB9LYDOgjKlQIZ-ExKKNUK0rtIoFtmBIVDAHIRMzTgpTwoEBwhi-nWLd7Hw5enqz"
        };

        function getWeekNumber(d) {
            d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
            d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
            var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
            var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);
            return weekNo;
        }

        function loadRequests() {
            updateButtonStatus('boba', 2);
            updateButtonStatus('favor', 1);
        }

        function updateButtonStatus(type, limit) {
            const currentWeek = getWeekNumber(new Date());
            const key = `requests_${type}_${currentWeek}`;
            const count = parseInt(localStorage.getItem(key) || 0);
            
            const btn = document.getElementById(`${type}Btn`);
            const status = document.getElementById(`${type}Status`);
            
            const left = limit - count;
            status.innerText = `Uses left: ${left}`;
            
            if (left <= 0) {
                btn.disabled = true;
                btn.innerText = "Used up for this week!";
            }
        }

        function requestItem(type, limit) {
            const currentWeek = getWeekNumber(new Date());
            const key = `requests_${type}_${currentWeek}`;
            let count = parseInt(localStorage.getItem(key) || 0);

            if (count < limit) {
                // 1. Send Alert
                alert(`Yay! Request for ${type} sent! üíå`);
                
                // 2. Increment & Save Locally
                localStorage.setItem(key, count + 1);
                updateButtonStatus(type, limit);

                // 3. Send Notification to the Correct Discord Channel
                const webhookUrl = WEBHOOKS[type];
                
                if(webhookUrl) {
                    fetch(webhookUrl, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ 
                            content: `üö® **ALERT:** She used a request!\nItem: **${type.toUpperCase()}**\nUses used: ${count + 1}/${limit}` 
                        })
                    }).then(response => {
                        console.log("Discord notification sent!");
                    }).catch(error => {
                        console.error("Error sending notification:", error);
                    });
                }
            }
        }

        // Initialize everything on load
        loadTasks();
        loadRequests();

    </script>
</body>
</html>
